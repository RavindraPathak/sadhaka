import{r as p,j as e,A as k,f as N,z as j,S as w,E as v,b as y,c as S,q as D,F as E}from"./index-BAPzlSzb.js";import{u as T,S as C}from"./useToast-DXIhv_vx.js";import{P as g}from"./plus-oY7xOqun.js";const A=i=>{if(!i.reminderTime)return"";const[o,t]=i.reminderTime.split(":").map(Number),l=new Date,a=new Date(l);a.setHours(o,t,0,0);const d=m=>m.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",c=d(new Date),x=d(a),n=new Date(a.getTime()+15*6e4),b=d(n),s=`Sadhaka: ${i.title}`,u=`Time for your daily spiritual practice: ${i.title}. Open Sadhaka App to log your progress.`;return["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Sadhaka//Spiritual Practice//EN","CALSCALE:GREGORIAN","BEGIN:VEVENT",`DTSTAMP:${c}`,`DTSTART:${x}`,`DTEND:${b}`,`SUMMARY:${s}`,`DESCRIPTION:${u}`,"RRULE:FREQ=DAILY","STATUS:CONFIRMED","BEGIN:VALARM","TRIGGER:-PT0M","ACTION:DISPLAY","DESCRIPTION:Reminder","END:VALARM","END:VEVENT","END:VCALENDAR"].join(`\r
`)},R=i=>{const o=A(i);if(!o)return;const t=new Blob([o],{type:"text/calendar;charset=utf-8"}),l=window.URL.createObjectURL(t),a=document.createElement("a");a.href=l,a.setAttribute("download",`sadhaka-${i.title.replace(/\s+/g,"-").toLowerCase()}.ics`),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(l)},$=({onClose:i,onSave:o,editItem:t})=>{const{showToast:l}=T(),[a,d]=p.useState((t==null?void 0:t.title)||""),[c,x]=p.useState((t==null?void 0:t.targetDays)||21),[n,b]=p.useState((t==null?void 0:t.reminderTime)||""),[s,u]=p.useState((t==null?void 0:t.notificationEnabled)||!1),h=["Kriya Asans","Kundalini Pranayams","Kundalini Kriyas","Shabri Mantra Jap","Maala Techniques","Agnihotra","Reiki","Fasting","Dhauti","Neti","Naadi Setting","Tratak","Karnaved","Bandha Practice","Energising Eyes","5 Alertness","Surya Arghya"],m=()=>{if(!a)return;const r={id:t?t.id:Date.now().toString(),title:a,streak:t?t.streak:0,targetDays:c,completedDates:t?t.completedDates:[],reminderTime:n,notificationEnabled:s};E(r),l(t?"Discipline updated":"New Sadhana added"),o(),i(),s&&"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()},f=()=>{if(!a||!n){l("Set a name and time first","error");return}R({title:a,reminderTime:n}),l("Calendar event downloaded")};return e.jsxs("div",{className:"pb-36 min-h-screen bg-spiritual-50 dark:bg-spiritual-deep animate-fade-in flex flex-col",children:[e.jsxs("div",{className:"p-6 pt-8 pb-12 rounded-b-[3rem] shadow-soft relative z-10 flex flex-col gap-6 bg-gradient-to-br from-spiritual-50 via-white to-spiritual-gold/20 dark:from-spiritual-900 dark:via-spiritual-deep dark:to-spiritual-gold/10",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("button",{onClick:i,className:"p-3 bg-white dark:bg-white/10 rounded-full shadow-sm hover:scale-105 transition-transform text-spiritual-600 dark:text-spiritual-200","aria-label":"Back",children:e.jsx(k,{size:24})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-spiritual-gold/20 dark:bg-spiritual-gold/10 text-spiritual-gold shadow-sm backdrop-blur-sm",children:t?e.jsx(N,{size:32,strokeWidth:1.5}):e.jsx(j,{size:32,strokeWidth:1.5})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-spiritual-900 dark:text-spiritual-50",children:t?"Edit Discipline":"New Sadhana"}),e.jsx("p",{className:"text-spiritual-500 dark:text-spiritual-400 font-medium",children:"Commit to your spiritual growth"})]})]})]}),e.jsx("div",{className:"flex-1 p-6 max-w-2xl mx-auto w-full relative z-20 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-spiritual-900/60 p-6 rounded-[2.5rem] shadow-soft border border-spiritual-100 dark:border-spiritual-700/50 backdrop-blur-sm space-y-6",children:[!t&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(w,{size:16,className:"text-spiritual-gold"}),e.jsx("p",{className:"text-xs font-bold text-spiritual-400 uppercase tracking-wider",children:"Popular Practices"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(r=>e.jsx("button",{onClick:()=>d(r),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all border ${a===r?"bg-spiritual-800 text-white border-spiritual-800 shadow-md scale-105":"bg-spiritual-50 dark:bg-slate-800 text-spiritual-600 dark:text-spiritual-300 border-spiritual-100 dark:border-slate-700 hover:border-spiritual-300"}`,children:r},r))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-spiritual-500 dark:text-spiritual-400 uppercase tracking-wider ml-1",children:"Practice Name"}),e.jsx("input",{type:"text",value:a,onChange:r=>d(r.target.value),placeholder:"e.g., Morning Gratitude",className:"w-full p-4 rounded-2xl border border-spiritual-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-spiritual-300 bg-spiritual-50 dark:bg-slate-800/50 text-spiritual-900 dark:text-spiritual-100 text-lg font-medium placeholder:text-spiritual-300"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-spiritual-500 dark:text-spiritual-400 uppercase tracking-wider ml-1",children:"Target Days"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:c,onChange:r=>x(Number(r.target.value)),className:"w-full p-4 rounded-2xl border border-spiritual-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-spiritual-300 bg-spiritual-50 dark:bg-slate-800/50 text-spiritual-900 dark:text-spiritual-100 text-lg font-medium [&::-webkit-inner-spin-button]:opacity-0"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm font-bold text-spiritual-400 pointer-events-none",children:"Days"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-spiritual-500 dark:text-spiritual-400 uppercase tracking-wider ml-1",children:"Reminder"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:n,onChange:r=>{b(r.target.value),s||u(!0)},className:"w-full p-4 rounded-2xl border border-spiritual-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-spiritual-300 bg-spiritual-50 dark:bg-slate-800/50 text-spiritual-900 dark:text-spiritual-100 text-lg font-medium [&::-webkit-calendar-picker-indicator]:opacity-0"}),e.jsx(v,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-spiritual-400 pointer-events-none",size:20})]})]})]}),e.jsxs("button",{onClick:()=>u(!s),className:`w-full p-4 rounded-2xl border transition-all flex items-center justify-between group ${s?"bg-spiritual-800 border-spiritual-800 shadow-md":"bg-spiritual-50 dark:bg-slate-800/50 border-spiritual-200 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl transition-colors ${s?"bg-white/20 text-white":"bg-white dark:bg-slate-700 text-spiritual-300 dark:text-slate-500"}`,children:s?e.jsx(y,{size:24}):e.jsx(S,{size:24})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`text-lg font-bold transition-colors ${s?"text-white":"text-spiritual-900 dark:text-spiritual-100"}`,children:"Daily Alarm"}),e.jsx("p",{className:`text-sm transition-colors ${s?"text-white/70":"text-spiritual-500 dark:text-slate-400"}`,children:"Get notified when it's time"})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${s?"border-white bg-white text-spiritual-800":"border-spiritual-300 dark:border-slate-500 text-transparent"}`,children:s&&e.jsx("div",{className:"w-3 h-3 bg-spiritual-800 rounded-full"})})]}),n&&e.jsxs("button",{onClick:f,className:"w-full p-4 rounded-2xl border border-dashed border-spiritual-300 dark:border-slate-600 flex items-center justify-between hover:bg-spiritual-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(D,{size:20})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"block text-sm font-bold text-spiritual-800 dark:text-spiritual-200",children:"Add to System Calendar"}),e.jsx("span",{className:"text-[10px] text-spiritual-500 dark:text-spiritual-400",children:"Reliable alarm even if app is closed"})]})]}),e.jsx(g,{size:18,className:"text-spiritual-400"})]}),e.jsxs("button",{onClick:m,disabled:!a,className:"w-full py-5 mt-4 rounded-2xl bg-spiritual-800 dark:bg-spiritual-100 text-white dark:text-spiritual-900  text-xl font-bold shadow-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3 disabled:hover:scale-100",children:[t?e.jsx(C,{size:24}):e.jsx(g,{size:24}),t?"Update Discipline":"Start Practice"]})]})]})})]})};export{$ as default};
