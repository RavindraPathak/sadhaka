import{v as j,u as y,r as i,a as E,p as I,s as T,j as e,C as $,c as P,d as R,P as B}from"./index-4hpc5m_x.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],O=j("pause",L);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],K=j("settings-2",F),Q=(r,o,d)=>{const{library:l}=y(),m=i.useRef(null),u=l.ambientSounds;return i.useEffect(()=>{const a=new Audio;return a.loop=!0,m.current=a,()=>{a.pause(),m.current=null}},[]),i.useEffect(()=>{const a=m.current;if(a)if(r!=="none"){const t=u.find(c=>c.id===r);if(t&&a.src!==t.url&&t.url&&(a.src=t.url),a.volume=Math.max(0,Math.min(1,d)),o&&(t!=null&&t.url)){const c=a.play();c!==void 0&&c.catch(n=>{console.debug("Ambience play failed:",n)})}else a.pause()}else a.pause()},[r,o,d,u]),m},V=({title:r,category:o,onClose:d})=>{const{preferences:l,updateAudioSettings:m}=E(),{library:u}=y(),{audio:a}=l,[t,c]=i.useState(!1),[n,v]=i.useState(20),[h,p]=i.useState(n*60),[f,N]=i.useState(!1),[w,S]=i.useState(a.ambienceId),[x,_]=i.useState(!0);Q(w,t,a.masterVolume);const C=i.useRef(Date.now()),g=i.useRef(null);i.useEffect(()=>{t||p(n*60)},[n,t]),i.useEffect(()=>{if(t&&h>0)g.current=setInterval(()=>{p(s=>s-1)},1e3);else if(h===0&&t){if(c(!1),x){const s=u.chimeThemes.find(b=>b.id===a.chimeThemeId)||u.chimeThemes[0];I(s.frequencies.exhale,s.soundType,2.5,a.masterVolume)}k()}return()=>clearInterval(g.current)},[t,h,x]);const k=()=>{const s=n*60-h;s>30&&T({id:Date.now().toString(),date:new Date().toISOString(),type:o,title:r,durationSeconds:s})},z=()=>{k(),d()},M=()=>{c(!t),t||(C.current=Date.now())},A=s=>{const b=Math.floor(s/60),D=s%60;return`${b}:${D.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"fixed inset-0 z-[60] flex flex-col bg-black overflow-hidden animate-fade-in",children:[e.jsx("style",{children:`
            @keyframes smoke-rise {
                0% { transform: translateY(0) scale(1); opacity: 0; }
                20% { opacity: 0.4; }
                100% { transform: translateY(-100px) scale(2); opacity: 0; }
            }
            .smoke-particle {
                position: absolute;
                background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 70%);
                border-radius: 50%;
                filter: blur(8px);
                animation: smoke-rise 6s infinite;
            }
            @keyframes flicker {
                0%, 100% { opacity: 0.9; transform: scale(1); }
                50% { opacity: 0.7; transform: scale(0.95); }
                70% { opacity: 1; transform: scale(1.05); }
            }
        `}),e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:"https://www.mangeshda.org/sites/default/files/2020-04/sadguru-mangeshda-darkness-to-light.jpg",alt:"Sadguru Mangeshda",className:"w-full h-full object-cover opacity-60"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-black/60"})]}),e.jsxs("div",{className:"relative z-20 flex justify-between items-center p-6 pt-8",children:[e.jsx("button",{onClick:z,className:"p-3 bg-white/10 hover:bg-white/20 rounded-full backdrop-blur-md transition-colors text-white",children:e.jsx($,{size:24})}),e.jsx("button",{onClick:()=>N(!f),className:`p-3 rounded-full backdrop-blur-md transition-colors ${f?"bg-white/30 text-white":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:e.jsx(K,{size:22})})]}),f&&e.jsx("div",{className:"absolute top-24 right-6 z-40 w-64 bg-black/80 backdrop-blur-xl border border-white/10 rounded-3xl p-5 animate-fade-in text-white",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-white/40 uppercase tracking-widest mb-2 block",children:"Ambience"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.ambientSounds.map(s=>e.jsx("button",{onClick:()=>S(s.id),className:`p-2 rounded-lg text-xs font-bold transition-all ${w===s.id?"bg-white text-black":"bg-white/10 text-white/60"}`,children:s.name},s.id))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[e.jsx("span",{className:"text-xs font-bold text-white/40 uppercase tracking-widest",children:"End Chime"}),e.jsx("button",{onClick:()=>_(!x),className:`p-2 rounded-full ${x?"bg-white/20 text-white":"bg-white/5 text-white/40"}`,children:x?e.jsx(P,{size:16}):e.jsx(R,{size:16})})]})]})}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center text-center p-6",children:[e.jsx("h2",{className:"text-3xl font-serif text-white/90 mb-2",children:r}),e.jsx("p",{className:"text-white/50 text-sm uppercase tracking-[0.2em] mb-12",children:"Self Practice"}),e.jsx("div",{className:"mb-12",children:e.jsx("span",{className:"text-7xl font-mono font-light text-white tabular-nums tracking-tight drop-shadow-2xl",children:A(h)})}),e.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-12",children:[t&&e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-64 -mt-32 pointer-events-none",children:[e.jsx("div",{className:"smoke-particle w-10 h-10 left-[45%] top-[80%]",style:{animationDelay:"0s"}}),e.jsx("div",{className:"smoke-particle w-12 h-12 left-[50%] top-[85%]",style:{animationDelay:"2s"}}),e.jsx("div",{className:"smoke-particle w-8 h-8 left-[40%] top-[75%]",style:{animationDelay:"4s"}})]}),e.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-[20px] transition-opacity duration-1000 ${t?"opacity-100":"opacity-60"}`,children:e.jsx("div",{className:"w-8 h-12 bg-gradient-to-t from-orange-500 via-yellow-400 to-white rounded-[50%_50%_50%_50%_/_60%_60%_40%_40%] blur-[2px] shadow-[0_0_20px_rgba(255,200,0,0.6)]",style:{animation:"flicker 0.2s infinite alternate"}})}),e.jsxs("svg",{width:"100",height:"60",viewBox:"0 0 100 60",className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-[-10px] drop-shadow-2xl",children:[e.jsx("path",{d:"M10 30 Q50 60 90 30 Q50 60 10 30 Z",fill:"#b45309",stroke:"#78350f",strokeWidth:"2"}),e.jsx("ellipse",{cx:"50",cy:"30",rx:"40",ry:"10",fill:"#78350f",opacity:"0.5"})]})]}),e.jsxs("div",{className:"w-full max-w-sm",children:[!t&&e.jsxs("div",{className:"mb-8 px-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/50 font-bold mb-2 uppercase tracking-wide",children:[e.jsx("span",{children:"Duration"}),e.jsxs("span",{children:[n," Min"]})]}),e.jsx("input",{type:"range",min:"5",max:"60",step:"5",value:n,onChange:s=>{v(parseInt(s.target.value)),p(parseInt(s.target.value)*60)},className:"w-full h-1 bg-white/20 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:bg-amber-500 [&::-webkit-slider-thumb]:rounded-full"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:M,className:`w-20 h-20 rounded-full flex items-center justify-center shadow-glow transition-transform hover:scale-105 active:scale-95 ${t?"bg-white/10 border border-white/20 text-white":"bg-white text-black"}`,children:t?e.jsx(O,{size:32,fill:"currentColor"}):e.jsx(B,{size:32,fill:"currentColor",className:"ml-1"})})})]})]})]})},Y=({filters:r,selected:o,onSelect:d})=>e.jsxs("div",{className:"flex overflow-x-auto pb-2 pt-2 -mx-6 px-6 gap-3 scrollbar-hide snap-x relative z-30 mask-linear-fade",children:[e.jsx("style",{children:`
        .mask-linear-fade {
          mask-image: linear-gradient(to right, black 90%, transparent 100%);
          -webkit-mask-image: linear-gradient(to right, black 90%, transparent 100%);
        }
      `}),r.map(l=>e.jsx("button",{onClick:()=>d(l),className:`
            snap-start flex-shrink-0 px-5 py-2.5 rounded-2xl text-sm font-bold uppercase tracking-wider transition-all duration-300 border min-h-[44px]
            ${o===l?"bg-spiritual-900 dark:bg-spiritual-100 text-white dark:text-spiritual-900 border-transparent shadow-md":"bg-transparent text-spiritual-500 dark:text-spiritual-400 border-spiritual-200 dark:border-spiritual-700 hover:border-spiritual-400 dark:hover:border-spiritual-500"}
          `,children:l},l)),e.jsx("div",{className:"w-4 flex-shrink-0"})]});export{Y as F,V as K,O as P,K as S,Q as u};
