import{h as y,j as e,x as C,y as S}from"./index-Cc3QSN8n.js";import{r as o}from"./vendor-DDTLr4RV.js";import{a1 as T,S as A,j as z,s as G,t as D,aa as E,am as f,ao as $,O as K,Y as P}from"./utils-kLxd5vEQ.js";const q=({onClose:p,onSave:h,onDelete:c,editItem:a})=>{const{showToast:d}=y(),[i,b]=o.useState((a==null?void 0:a.title)||""),[m,g]=o.useState((a==null?void 0:a.targetDays)||21),[r,k]=o.useState((a==null?void 0:a.reminderTime)||""),[t,u]=o.useState((a==null?void 0:a.notificationEnabled)||!1),[n,x]=o.useState(null),j=["Kriya Asans","Kundalini Pranayams","Kundalini Kriyas","Shabri Mantra Jap","Maala Techniques","Agnihotra","Reiki","Fasting","Dhauti","Neti","Naadi Setting","Tratak","Karnaved","Bandha Practice","Energising Eyes","5 Alertness","Surya Arghya"],w=()=>{if(!i)return;const s=t&&r!=="",l={id:a?a.id:Date.now().toString(),title:i,streak:a?a.streak:0,targetDays:m,completedDates:a?a.completedDates:[],reminderTime:r,notificationEnabled:s};S(l),d(a?"Goal updated":"New Goal added"),h(),p(),s&&typeof window<"u"&&"Notification"in window&&window.Notification.permission!=="granted"&&window.Notification.requestPermission()},N=async()=>{if(!i||!r){d("Set a name and time first","error");return}const s={id:(a==null?void 0:a.id)||"temp",title:i,reminderTime:r},l=await C(s);d(l)},v=()=>{a&&c&&x({title:"Delete Goal?",message:"This will permanently remove this goal and its history.",confirmText:"Delete Goal",onConfirm:()=>c(a.id)})};return e.jsxs("div",{className:"pb-36 min-h-screen bg-spiritual-50 dark:bg-spiritual-deep animate-fade-in flex flex-col",children:[e.jsx("div",{className:"sticky top-0 z-50 pt-8 pb-4 px-6 rounded-b-[2rem] shadow-soft flex items-center justify-between bg-gradient-to-br from-spiritual-50 via-white to-spiritual-gold/20 dark:from-spiritual-900 dark:via-spiritual-deep dark:to-spiritual-gold/10 backdrop-blur-md",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:p,className:"p-2.5 bg-white dark:bg-white/10 rounded-full shadow-sm hover:scale-105 transition-transform text-spiritual-600 dark:text-spiritual-200","aria-label":"Back",children:e.jsx(T,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-spiritual-900 dark:text-spiritual-50",children:a?"Edit Goal":"Add Goal"}),e.jsx("p",{className:"text-xs text-spiritual-600 dark:text-spiritual-400 font-bold uppercase tracking-wider",children:"Form A Habit"})]})]})}),e.jsx("div",{className:"flex-1 p-6 max-w-2xl mx-auto w-full relative z-20 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-spiritual-900/60 p-6 rounded-[2.5rem] shadow-soft border border-spiritual-100 dark:border-spiritual-700/50 backdrop-blur-sm space-y-6",children:[!a&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(A,{size:16,className:"text-spiritual-gold"}),e.jsx("p",{className:"text-xs font-bold text-spiritual-400 uppercase tracking-wider",children:"Popular Spiritual Goals"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(s=>e.jsx("button",{onClick:()=>b(s),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all border ${i===s?"bg-spiritual-800 text-white border-spiritual-800 shadow-md scale-105":"bg-spiritual-50 dark:bg-slate-800 text-spiritual-600 dark:text-spiritual-300 border-spiritual-100 dark:border-slate-700 hover:border-spiritual-300"}`,children:s},s))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-spiritual-500 dark:text-spiritual-400 uppercase tracking-wider ml-1",children:"Custom Goal"}),e.jsx("input",{type:"text",value:i,onChange:s=>b(s.target.value),placeholder:"e.g., Morning Gratitude",className:"w-full p-4 rounded-2xl border border-spiritual-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-spiritual-300 bg-spiritual-50 dark:bg-slate-800/50 text-spiritual-900 dark:text-spiritual-100 text-lg font-medium placeholder:text-spiritual-300"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-spiritual-500 dark:text-spiritual-400 uppercase tracking-wider ml-1",children:"Target Days"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:m,onChange:s=>g(Number(s.target.value)),className:"w-full p-4 rounded-2xl border border-spiritual-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-spiritual-300 bg-spiritual-50 dark:bg-slate-800/50 text-spiritual-900 dark:text-spiritual-100 text-lg font-medium [&::-webkit-inner-spin-button]:opacity-0"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm font-bold text-spiritual-400 pointer-events-none",children:"Days"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-bold text-spiritual-500 dark:text-spiritual-400 uppercase tracking-wider ml-1",children:"Reminder"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:r,onChange:s=>{const l=s.target.value;k(l),u(!!l)},className:"w-full p-4 rounded-2xl border border-spiritual-200 dark:border-slate-700 focus:outline-none focus:ring-2 focus:ring-spiritual-300 bg-spiritual-50 dark:bg-slate-800/50 text-spiritual-900 dark:text-spiritual-100 text-lg font-medium [&::-webkit-calendar-picker-indicator]:opacity-0"}),e.jsx(z,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-spiritual-400 pointer-events-none",size:20})]})]})]}),e.jsxs("button",{onClick:()=>{if(!t&&!r){d("Set a reminder time first","error");return}u(!t)},className:`w-full p-4 rounded-2xl border transition-all flex items-center justify-between group ${t?"bg-spiritual-800 border-spiritual-800 shadow-md":"bg-spiritual-50 dark:bg-slate-800/50 border-spiritual-200 dark:border-slate-700"} ${!t&&!r?"opacity-70":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl transition-colors ${t?"bg-white/20 text-white":"bg-white dark:bg-slate-700 text-spiritual-300 dark:text-slate-500"}`,children:t?e.jsx(G,{size:24}):e.jsx(D,{size:24})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`text-lg font-bold transition-colors ${t?"text-white":"text-spiritual-900 dark:text-spiritual-100"}`,children:"Daily Alarm"}),e.jsx("p",{className:`text-xs transition-colors ${t?"text-white/70":"text-spiritual-500 dark:text-slate-400"}`,children:"Get notified when it's time"})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${t?"border-white bg-white text-spiritual-800":"border-spiritual-300 dark:border-slate-500 text-transparent"}`,children:t&&e.jsx("div",{className:"w-3 h-3 bg-spiritual-800 rounded-full"})})]}),r&&e.jsxs("button",{onClick:N,className:"w-full p-4 rounded-2xl border border-dashed border-spiritual-300 dark:border-slate-600 flex items-center justify-between hover:bg-spiritual-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:e.jsx(E,{size:20})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"block text-sm font-bold text-spiritual-800 dark:text-spiritual-200",children:"Add to System Calendar"}),e.jsx("span",{className:"text-xs text-spiritual-500 dark:text-spiritual-400",children:"Reliable alarm even if app is closed"})]})]}),e.jsx(f,{size:18,className:"text-spiritual-400"})]}),e.jsxs("button",{onClick:w,disabled:!i,className:"w-full py-4 mt-4 rounded-2xl bg-spiritual-800 dark:bg-spiritual-100 text-white dark:text-spiritual-900  text-xl font-bold shadow-lg hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3 disabled:hover:scale-100",children:[a?e.jsx($,{size:24}):e.jsx(f,{size:24}),a?"Update Goal":"Add Goal"]}),a&&c&&e.jsxs("button",{onClick:v,className:"w-full py-4 mt-2 text-red-500 font-bold text-sm hover:bg-red-50 dark:hover:bg-red-900/10 rounded-2xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(K,{size:18})," Delete Goal"]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-spiritual-deep/80 backdrop-blur-md z-[80] flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-spiritual-900 w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl border border-white/10 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(P,{size:32,className:"text-red-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-spiritual-900 dark:text-spiritual-100 mb-2",children:n.title}),e.jsx("p",{className:"text-spiritual-500 dark:text-spiritual-400 mb-8",children:n.message}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{onClick:()=>{n.onConfirm(),x(null)},className:"w-full py-4 bg-red-500 text-white rounded-2xl font-bold transition-transform active:scale-95 shadow-lg shadow-red-500/20",children:n.confirmText}),e.jsx("button",{onClick:()=>x(null),className:"w-full py-3 text-spiritual-500 font-bold transition-colors hover:text-spiritual-800 dark:hover:text-white",children:"Cancel"})]})]})})]})};export{q as default};
